(function(b){var c=function(d){return this.each(function(){var f=b(this),j=f.data(),h,e=[f],g=this.tagName,k=0,i;h=b.extend({content:"body",headings:"h1,h2,h3"},{content:j.toc||undefined,headings:j.tocHeadings||undefined},d);i=h.headings.split(",");b(h.content).find(h.headings).attr("id",function(m,l){return b(this).text().replace(/(\w+)(\W+)/g,"$1$2").replace(/\s+/g,"-").replace(/\?|\!|\,|\.|\}|\)|\>$/,"")}).each(function(){var l=b(this),n=b.map(i,function(o,p){return l.is(o)?p:undefined})[0];if(n>k){var m=e[0].children("li:last")[0];if(m){e.unshift(b("<"+g+"/>").appendTo(m))}}else{e.splice(0,Math.min(k-n,Math.max(e.length-1,0)))}b("<li/>").appendTo(e[0]).append(b("<a/>").text(l.text()).addClass("data-scroll").attr("href","#"+l.attr("id")));k=n})})},a=b.fn.toc;b.fn.toc=c;b.fn.toc.noConflict=function(){b.fn.toc=a;return this};b(function(){c.call(b("[data-toc]"))})}(window.jQuery));